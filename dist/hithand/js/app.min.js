!function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e){"use strict";var a,n,i,s,o,d,r,h,c,h,l,m=500,g=880,p=new Phaser.Game(m,g,Phaser.AUTO,"container"),u=!1,f=0,v=5,b=!1,T=30,C=!1;p.States={},p.States.main=function(){var t=this;this.preload=function(){p.load.image("bg","hithand/assets/img/bg.png"),p.load.image("myhand","hithand/assets/img/myhand.png"),p.load.image("button2","hithand/assets/img/button2.png"),p.load.image("yanggong","hithand/assets/img/yanggong.png"),p.load.image("boom","hithand/assets/img/boom.png"),p.load.image("jingong","hithand/assets/img/jingong.png"),p.load.image("lock","hithand/assets/img/lock.png"),p.load.spritesheet("chance","hithand/assets/img/chance.png",53,50,2),p.load.spritesheet("hand","hithand/assets/img/hand.png",282,800,2),p.load.bitmapFont("number","hithand/assets/img/number.png","hithand/assets/img/number.xml"),p.device.desktop||(this.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.scale.forcePortrait=!0,this.scale.refresh())},this.create=function(){u=!1,b=!1,f=0,v=5,T=30,C=!1;var t=new Array(v);d&&p.time.events.remove(d),p.physics.startSystem(Phaser.Physics.ARCADE),a=p.add.group();var e=p.add.tileSprite(0,0,m,g,"bg");a.addChild(e),n=p.add.sprite(p.world.centerX,790,"myhand"),n.scale.setTo(.8),n.anchor.setTo(.5,.5),n.inputEnabled=!0,a.addChild(n),p.physics.arcade.enable(n),s=p.add.sprite(20,420,"boom"),a.addChild(s),s.visible=!1,i=p.add.sprite(p.world.centerX,70,"hand"),i.scale.setTo(.8),i.anchor.setTo(.5,.5),i.inputEnabled=!0,a.addChild(i),p.physics.arcade.enable(i),c=p.add.tween(i),c.to({y:350},500,Phaser.Easing.Back.Out,!1,0,0,!0),c.onStart.add(function(){}),c.onComplete.add(function(){i.frame=2,u=!1}),h=p.add.tween(i),h.to({y:160},120,Phaser.Easing.Cubic.In,!1,0,0,!0),h.onStart.add(function(){}),h.onComplete.add(function(){});var y=p.add.tween(n);y.to({y:2100},600,Phaser.Easing.Linear.None,!1,0,0,!0),y.onStart.add(function(){t[f].frame=2}),y.onComplete.add(function(){f++,b=!1,f===v&&(l.visible=!0)}),l=p.add.sprite(140,640,"lock"),l.scale.setTo(.8),l.visible=!1;var w=p.add.button(0,740,"button2",function(){b===!1&&f<v&&!C&&(b=!0,y.start())});a.addChild(w),w.width=m,w.height=140,r=i.animations.add("hit"),i.events.onInputDown.add(function(){},this);for(var S=0;S<t.length;S++)t[S]=p.add.sprite(20,470+50*S,"chance"),t[S].scale.setTo(.8),t[S].frame=1,a.addChild(t[S]);o=p.add.bitmapText(260,40,"number",T,80),o.anchor.setTo(.5,.5),o.angle=-5,p.add.tween(o.scale).to({x:.8,y:.8},1e3,"Linear",!0,0,-1,!0),p.add.tween(o).to({angle:5},1e3,"Linear",!0,0,-1,!0),p.time.events.loop(Phaser.Timer.SECOND,function(){T>0?T--:0===T&&p.state.start("over")},this),d=p.time.events.loop(3*Phaser.Timer.SECOND,this.NPCMove,this)},this.update=function(){p.physics.arcade.overlap(i,n,this.onHit,null,this),o.text=T},this.onHit=function(e,a){C||(s.visible=!0,C=!0,p.time.events.add(1*Phaser.Timer.SECOND,function(){p.state.start("over")},t))},this.NPCMove=function(){var e=Math.random();if(e<=.5){if(u||C||b)return;u=!0,i.play("hit",4,!1),r.onComplete.add(function(){c.start()},t)}else{if(u||C)return;h.start()}}},p.States.over=function(){var t=this;this.create=function(){var e=(p.add.tileSprite(0,0,m,g,"bg"),p.add.sprite(p.world.centerX,p.world.centerY,"boom"));e.anchor.setTo(.5,.5),e.scale.setTo(1.3),e.inputEnabled=!0,e.events.onInputDown.add(function(){p.state.start("main")},t);var a=p.add.text(p.world.centerX,p.world.centerY+20,"",{font:"bold 32px Microsoft Yahei",fill:"#999",align:"center"});C?a.setText("回去再练三十年\nOK?"):a.setText("单身三十年的手速\n朕自愧不如"),a.anchor.setTo(.5,.5)}},p.state.add("main",p.States.main),p.state.add("over",p.States.over),p.state.start("main")}]);